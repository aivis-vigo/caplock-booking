<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/layout :: head('Tickets')}"></head>
<body>
<nav th:replace="~{fragments/layout :: nav}"></nav>

<main>
    <div class="page-header">
        <h1>Tickets</h1>
    </div>

    <p class="empty" th:if="${tickets == null or tickets.isEmpty()}">No tickets found.</p>

    <div style="display:flex; flex-direction:column; gap:1rem;"
         th:if="${tickets != null and !tickets.isEmpty()}">

        <div class="card" th:each="ticket : ${tickets}"
             style="display:grid; grid-template-columns:1fr auto; gap:1.5rem; align-items:start; padding:1.25rem 1.5rem;">

            <div style="display:grid; grid-template-columns:1fr 1fr; gap:.4rem 2rem;">
                <p><strong>Event</strong><br>
                    <span th:text="${ticket.event ?: '—'}" style="color:#64748b;"></span></p>
                <p><strong>Holder</strong><br>
                    <span th:text="${ticket.holderName ?: '—'}" style="color:#64748b;"></span></p>
                <p><strong>Type</strong><br>
                    <span th:text="${ticket.ticketType ?: '—'}" style="color:#64748b;"></span></p>
                <p><strong>Status</strong><br>
                    <span class="badge badge-yellow" th:text="${ticket.status ?: 'PENDING'}"></span></p>
                <p><strong>Section</strong><br>
                    <span th:text="${ticket.section ?: '—'}" style="color:#64748b;"></span></p>
                <p><strong>Row</strong><br>
                    <span th:text="${ticket.row ?: '—'}" style="color:#64748b;"></span></p>
                <p><strong>Seat</strong><br>
                    <span th:text="${ticket.seatNumber ?: '—'}" style="color:#64748b;"></span></p>
                <p><strong>Purchased At</strong><br>
                    <span th:text="${ticket.purchasedAt != null
                                   ? #temporals.format(ticket.purchasedAt, 'MMM d, yyyy HH:mm')
                                   : '—'}" style="color:#64748b;"></span></p>
                <p th:if="${ticket.holderEmail != null}"><strong>Email</strong><br>
                    <span th:text="${ticket.holderEmail}" style="color:#64748b;"></span></p>
                <p th:if="${ticket.order != null}"><strong>Booking Ref</strong><br>
                    <code style="font-size:.8rem; background:#f1f5f9; padding:.1rem .35rem; border-radius:4px;"
                          th:text="${ticket.order}"></code></p>
            </div>

            <div th:if="${ticket.qrCode != null}" style="text-align:center;">
                <img th:src="@{'/' + ${ticket.qrCode}}" alt="QR Code"
                     style="width:110px; height:110px; border:1px solid #e2e8f0; border-radius:6px; display:block;">
                <p style="font-size:.75rem; color:#94a3b8; margin-top:.4rem;">Scan to validate</p>
            </div>

        </div>
    </div>
</main>
</body>
</html>
