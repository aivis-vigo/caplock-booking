<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Events</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        table { border-collapse: collapse; width: 100%; margin-top: 20px; }
        th, td { border: 1px solid #ddd; padding: 12px; text-align: left; vertical-align: middle; }
        th { background-color: #4CAF50; color: white; }
        tr:nth-child(even) { background-color: #f2f2f2; }

        .toolbar { display: flex; gap: 10px; align-items: center; margin-bottom: 10px; }
        .btn { padding: 8px 12px; border: none; border-radius: 4px; cursor: pointer; font-size: 14px; text-decoration: none; display: inline-block; }
        .btn-add { background-color: #4CAF50; color: white; }
        .btn-view { background-color: #2d89ef; color: white; }
        .btn-edit { background-color: #f0ad4e; color: white; }
        .btn-delete { background-color: #d9534f; color: white; }
        .btn:disabled { opacity: 0.6; cursor: not-allowed; }

        .actions { display: flex; gap: 8px; flex-wrap: wrap; }
        .muted { color: #666; }
    </style>
</head>
<body>

<h1>Events</h1>

<div class="toolbar">
    <a th:href="@{/events/form}" class="btn btn-add">Add New Event</a>
</div>

<table th:if="${eventList != null and !eventList.isEmpty()}">
    <thead>
    <tr>
        <th>ID</th>
        <th>Title</th>
        <th>Date</th>
        <th>Location</th>
        <th>Duration (min)</th>
        <th>Status</th>
        <th>Category</th>
        <th>Actions</th>
    </tr>
    </thead>

    <tbody>
    <tr th:each="event : ${eventList}">
        <td th:text="${event.id}">1</td>
        <td th:text="${event.title}">Title</td>
        <td th:text="${event.eventDate != null ? #temporals.format(event.eventDate, 'yyyy-MM-dd HH:mm') : '—'}">—</td>
        <td th:text="${event.location}">Location</td>
        <td th:text="${event.duration}">60</td>
        <td th:text="${event.status}">OPEN</td>
        <td th:text="${event.category}">Category</td>

        <td>
            <div class="actions">
                <!-- DETAILS (GET) -->
                <a class="btn btn-view"
                   th:href="@{/events/details/view/{id}(id=${event.id})}">
                    Details
                </a>

                <!-- EDIT (usually GET to show form; but you said update is PUT) -->
                <!-- If you have an edit form endpoint, prefer: /events/form/{id} -->
                <a class="btn btn-edit"
                   th:href="@{/events/form/{id}(id=${event.id})}">
                    Edit
                </a>

                <!-- DELETE (POST) -->
                <form th:action="@{/events/delete/{id}(id=${event.id})}" method="post" style="display:inline;">
                    <button type="submit" class="btn btn-delete"
                            onclick="return confirm('Delete this event?');">
                        Delete
                    </button>
                </form>

<!--                <form th:action="@{/events/update/{id}(id=${event.id})}" method="post" style="display:inline;">-->
<!--                    <input type="hidden" name="_method" value="PUT">-->
<!--                    <button type="submit" class="btn btn-edit">Update</button>-->
<!--                </form>-->
            </div>
            <div class="muted" style="margin-top:6px;">
                <!-- Optional note: remove if you don't want -->
                Edit opens the form; Update happens when you submit the form.
            </div>
        </td>
    </tr>
    </tbody>
</table>

<p th:if="${eventList == null or eventList.isEmpty()}">No events available.</p>

</body>
</html>
